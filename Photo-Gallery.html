<html>
    <head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.js"></script>
<script src="https://unpkg.com/react@15/dist/react.js"></script>
<script src="https://unpkg.com/react-dom@15/dist/react-dom.js"></script>
<script src="./node_modules/react-component-visibility/index.js"></script>
<script type="text/babel">

var Photo=React.createClass({
render()
{
return  <div className="photo_tileview album1">
                              <div className="photo_tileview_inner">
                                <div className="photo_tileview_content box_photo1" >
                                  <a href="resources_photogallery_album.html">
                                    <img src={this.props.appitem.Img} border="0"/>
                                    <div className="photo_tileview_detailsbox caption_photo1">
                                      <ul className="photo_tileview_detailslist">
                                        <li className="photo_tileview_medium photo_tileview_titlesmcollapsed">
                                          <div className="photo_tileview_titletxtsmcollapsed" >{this.props.appitem.Title}</div>
                                        </li>
                                      </ul>
                                    </div>
                                  </a>
                                </div>
                                <div className="photo_tileview_tabularbox hide">
                                  <a className="photo_tileview_selectionbox">
                                    <span className="s4-itm-cbox s4-itm-imgcbox">
                                      <span className="s4-itm-imgcbx-inner">
                                        <span className="selectitem-span">
                                          <i className="fa fa-check"></i>
                                        </span>
                                      </span>
                                    </span>
                                  </a>
                                  <div className="list-titlelink"></div>
                                  <a className="lstitmlinkanchor ellpsis-a-tile">
                                    <i className="fa fa-ellipsis-h"></i>
                                  </a>
                                </div>
                              </div>
                            </div>  
}
});

var PhotoGallery=React.createClass({

mixins : [
    ComponentVisibilityMixin
  ],
getInitialState()
{
return {
    promodata:[{"Title":"9th Division/Infantry Team Building on 29 Oct 2016","Img":"./folder_img.png"},
{"Title":"2016 DFO Planning Retreat\n","Img":"./folder_img.png"},
{"Title":"Family and ACTIVE Day 2016\n","Img":"./folder_img.png"},
{"Title":"Merry Christmas 2016\n","Img":"./folder_img.png"},
{"Title":"Album 5\n","Img":"./folder_img.png"},
{"Title":"Album 6\n","Img":"./folder_img.png"}]
}
},


getPromoData()
{
    return [{"Title":"Universal Studio Singapore Promotion: Winter Season","PromoPeriod":"01 Dec 2016 to 02 Jan 2017","Postedby":"MSS-PSC","Date":"30-Dec-16"},
{"Title":"Financial Planning Awareness Talk\n","PromoPeriod":"25 Oct 2016 to 04 Nov 2016","Postedby":"MSS-PSC","Date":"12/30/2016"}]
},
retrieveFromWebService()
{
 console.log('inside component did mount')
    var that=this;
    var url="photo-gallery.json"
    fetch(url)
    .then(function(response)
    {
    if(response.status>=400)
    {
        throw new Error("no server")
    }
    return response.json();
    })
    .then(function(data)
    { 
        that.setState({promodata:data});
    })

},

  componentVisibilityChanged: function() {
      this.retrieveFromWebService();
   this.disableVisibilityHandling();
  }, 

renderPromotions()
{
    return this.state.promodata.map((promoitem) => (
        <Photo appitem={promoitem} />
    ));  
},
    render()
    {
        return <div>{this.renderPromotions()}</div>;
    }

});


ReactDOM.render(
    <PhotoGallery />,
document.getElementById('PhotoGallery')
); 
</script>
    </head>

<body>
    <div id="PhotoGallery">
  
   </div> 
</body>
</html>